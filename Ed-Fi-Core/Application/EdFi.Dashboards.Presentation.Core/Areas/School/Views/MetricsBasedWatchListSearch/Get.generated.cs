#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18444
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace EdFi.Dashboards.Presentation.Core.Areas.School.Views.MetricsBasedWatchListSearch
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 1 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
    using Cassette.Views;
    
    #line default
    #line hidden
    
    #line 2 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
    using EdFi.Dashboards.Common;
    
    #line default
    #line hidden
    
    #line 3 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
    using EdFi.Dashboards.Common.Utilities;
    
    #line default
    #line hidden
    
    #line 4 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
    using EdFi.Dashboards.Core.Providers.Context;
    
    #line default
    #line hidden
    using EdFi.Dashboards.Metric.Resources.Models;
    using EdFi.Dashboards.Presentation.Architecture.Mvc.Extensions;
    
    #line 5 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
    using EdFi.Dashboards.Presentation.Core.Areas.School.Controllers;
    
    #line default
    #line hidden
    using EdFi.Dashboards.Presentation.Web.Utilities;
    using EdFi.Dashboards.Resources.Navigation;
    
    #line 6 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
    using EdFi.Dashboards.Resources.Security.Common;
    
    #line default
    #line hidden
    
    #line 7 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
    using EdFi.Dashboards.SecurityTokenService.Authentication;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/School/Views/MetricsBasedWatchListSearch/Get.cshtml")]
    public partial class Get : System.Web.Mvc.WebViewPage<EdFi.Dashboards.Resources.Models.Common.MetricsBasedWatchListSearchModel>
    {
        public Get()
        {
        }
        public override void Execute()
        {








WriteLiteral("\r\n");


            
            #line 10 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
  
    var schoolId = EdFiDashboardContext.Current.SchoolId.GetValueOrDefault();
    var localEducationAgencyId = EdFiDashboardContext.Current.LocalEducationAgencyId.GetValueOrDefault();
    var staffUSI = UserInformation.Current.StaffUSI;
    var referringController = Model.ReferringController;
    var showUnshareButton = IoC.Resolve<ICurrentUserClaimInterrogator>().HasClaimWithinEducationOrganizationHierarchy(EdFiClaimTypes.ManageWatchList, schoolId);


            
            #line default
            #line hidden
WriteLiteral("\r\n");


DefineSection("ContentPlaceHolderHead", () => {

WriteLiteral("\r\n    <title>");


            
            #line 19 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
       Write(Html.Action("Title", typeof(SchoolLayoutController).GetControllerName(), new { subTitle = "Dynamic List Search" }));

            
            #line default
            #line hidden
WriteLiteral("</title>\r\n    <script type=\"text/javascript\">\r\n        var pageArea = { Area: \'sc" +
"hool\', Page: \'Dynamic List Search\' };\r\n    </script>\r\n");


});

WriteLiteral("\r\n");


DefineSection("ContentPlaceHolder1", () => {

WriteLiteral("\r\n    <div class=\"watch-list-search\">\r\n        <form>\r\n            <div>\r\n       " +
"         <label>Shared Dynamic Lists:</label>\r\n                <span>\r\n         " +
"           <select id=\"selected-watch-list\">\r\n");


            
            #line 31 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                         if (Model.WatchListGroups.Count > 0)
                        {

            
            #line default
            #line hidden
WriteLiteral("                            <option selected=\"selected\" value=\"0\">Select Dynamic " +
"List</option>\r\n");


            
            #line 34 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                        }
                        else
                        {

            
            #line default
            #line hidden
WriteLiteral("                            <option selected=\"selected\" value=\"0\">No Dynamic List" +
"s Available</option>\r\n");


            
            #line 38 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                        }

            
            #line default
            #line hidden
WriteLiteral("                        \r\n");


            
            #line 40 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                         foreach (var group in Model.WatchListGroups)
                        {

            
            #line default
            #line hidden
WriteLiteral("                            <optgroup label=\"");


            
            #line 42 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                                        Write(group.TeacherName);

            
            #line default
            #line hidden
WriteLiteral("\">\r\n");


            
            #line 43 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                                 foreach (var list in group.WatchLists)
                                {

            
            #line default
            #line hidden
WriteLiteral("                                    <option value=\"");


            
            #line 45 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                                              Write(list.MetricBasedWatchListId);

            
            #line default
            #line hidden
WriteLiteral("\">");


            
            #line 45 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                                                                            Write(list.WatchListName);

            
            #line default
            #line hidden
WriteLiteral("</option>\r\n");


            
            #line 46 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                                }

            
            #line default
            #line hidden
WriteLiteral("                            </optgroup>\r\n");


            
            #line 48 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                        }

            
            #line default
            #line hidden
WriteLiteral("                    </select>\r\n                </span>\r\n            </div>\r\n     " +
"       <div>\r\n                <ul>\r\n");


            
            #line 54 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                     if (showUnshareButton)
                    {

            
            #line default
            #line hidden
WriteLiteral("                        <li><button id=\"unshare-watch-list\" class=\"btn\">Unshare D" +
"ynamic List</button></li>\r\n");


            
            #line 57 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                    }

            
            #line default
            #line hidden
WriteLiteral("                    <li>\r\n");


            
            #line 59 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                         if (Model.WatchListGroups.Count > 0)
                        {

            
            #line default
            #line hidden
WriteLiteral("                            <button id=\"save-shared-watch-list\" class=\"btn\">Add D" +
"ynamic List</button>\r\n");


            
            #line 62 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                        }
                        else
                        {

            
            #line default
            #line hidden
WriteLiteral("                            <button id=\"save-shared-watch-list\" class=\"btn\" disab" +
"led=\"disabled\">Add Dynamic List</button>\r\n");


            
            #line 66 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                        }

            
            #line default
            #line hidden
WriteLiteral(@"                    </li>
                    <li><button id=""cancel-shared-watch-list"" class=""btn"">Cancel</button></li>
                </ul>
            </div>
        </form>
        <div>&nbsp;</div>
        <div id=""watch-list-description-label"" style=""display: none;width: 100%;""><label style=""width: 100%;"">Description:</label></div>
        <div id=""watch-list-description"" style=""display: none;width: 100%;""><label style=""width: 100%;"" id=""watch-list-description-text""></label></div>
        <div id=""watch-list-space"" style=""display: none;width: 100%;"">&nbsp;</div>
        <div id=""watch-list-selections-label"" style=""display: none;width: 100%;""><label style=""width: 100%;"">Selected Filters:</label></div>
        <div id=""watch-list-selections"" style=""display: none;width: 100%;""><label style=""width: 100%;"" id=""watch-list-selections-text""></label></div>
    </div>
    <script type=""text/javascript"">
        $('#save-shared-watch-list').click(function() {
            if ($('#selected-watch-list').val() <= 0) {
                alert('Please select a dynamic list first');
            }

            var dataToSend = {
                SchoolId: ");


            
            #line 86 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                      Write(schoolId);

            
            #line default
            #line hidden
WriteLiteral(",\r\n                LocalEducationAgencyId: ");


            
            #line 87 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                                    Write(localEducationAgencyId);

            
            #line default
            #line hidden
WriteLiteral(",\r\n                StaffUSI: \'");


            
            #line 88 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                       Write(staffUSI);

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                MetricsBasedWatchListId: $(\'#selected-watch-list\').val(),\r\n  " +
"              ReferringController: \'");


            
            #line 90 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                                  Write(referringController);

            
            #line default
            #line hidden
WriteLiteral(@"'
            };

            $.ajax({
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(dataToSend)
            }).done(function(returnData) {
                NavigateToPage(returnData.Url);
            });
        });

        $('#cancel-shared-watch-list').click(function() {
            var returnPage = '");


            
            #line 103 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                          Write(Request.UrlReferrer);

            
            #line default
            #line hidden
WriteLiteral(@"';

            if (returnPage !== '') {
                NavigateToPage(returnPage);
            }
        });

        $('#unshare-watch-list').click(function() {
            var watchListId = $('#selected-watch-list').val();

            var dataToSend = {
                SchoolId: ");


            
            #line 114 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                      Write(schoolId);

            
            #line default
            #line hidden
WriteLiteral(",\r\n                StaffUSI: \'");


            
            #line 115 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                       Write(staffUSI);

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                MetricBasedWatchListId: watchListId\r\n            };\r\n\r\n      " +
"      $.ajax({\r\n                url: \'");


            
            #line 120 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                  Write(Model.UnshareServiceUrl);

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                type: \'POST\',\r\n                contentType: \'application/json" +
"\',\r\n                data: JSON.stringify(dataToSend)\r\n            }).done(functi" +
"on(returnData) {\r\n                NavigateToPage(\'");


            
            #line 125 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                           Write(EdFiDashboardContext.Current.RoutedUrl);

            
            #line default
            #line hidden
WriteLiteral("\');\r\n            });\r\n        });\r\n\r\n        $(\'#selected-watch-list\').change(fun" +
"ction() {\r\n            var selectedValue = $(this).find(\'option:selected\').val()" +
";\r\n\r\n            var dataToSend = {\r\n                LocalEducationAgencyId: ");


            
            #line 133 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                                    Write(localEducationAgencyId);

            
            #line default
            #line hidden
WriteLiteral(",\r\n                StaffUSI: \'");


            
            #line 134 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                       Write(staffUSI);

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                MetricsBasedWatchListId: selectedValue\r\n            };\r\n\r\n   " +
"         $.ajax({\r\n                url: \'");


            
            #line 139 "..\..\Areas\School\Views\MetricsBasedWatchListSearch\Get.cshtml"
                  Write(Model.DescriptionServiceUrl);

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                type: \'POST\',\r\n                contentType: \'application/json" +
"\',\r\n                data: JSON.stringify(dataToSend)\r\n            }).done(functi" +
"on(returnData) {\r\n                if (returnData.WatchListDescription != \'\') {\r\n" +
"                    $(\'#watch-list-description-label\').show();\r\n                " +
"    $(\'#watch-list-description\').show();\r\n                    $(\'#watch-list-spa" +
"ce\').show();\r\n                    $(\'#watch-list-description-text\').text(returnD" +
"ata.WatchListDescription);\r\n                } else {\r\n                    $(\'#wa" +
"tch-list-description-label\').hide();\r\n                    $(\'#watch-list-descrip" +
"tion\').hide();\r\n                    $(\'#watch-list-space\').hide();\r\n            " +
"        $(\'#watch-list-description-text\').text(\'\');\r\n                }\r\n\r\n      " +
"          if (returnData.WatchListSelections != \'\') {\r\n                    $(\'#w" +
"atch-list-selections-label\').show();\r\n                    $(\'#watch-list-selecti" +
"ons\').show();\r\n                    $(\'#watch-list-selections-text\').text(returnD" +
"ata.WatchListSelections);\r\n                } else {\r\n                    $(\'#wat" +
"ch-list-selections-label\').hide();\r\n                    $(\'#watch-list-selection" +
"s\').hide();\r\n                    $(\'#watch-list-selections-text\').text(\'\');\r\n   " +
"             }\r\n            }).fail(function() {\r\n                alert(\'Error\')" +
";\r\n            });\r\n        });\r\n\r\n        // stops the form from posting back t" +
"o the server\r\n        $(\'form\').submit(function(event) {\r\n            event.prev" +
"entDefault();\r\n        });\r\n    </script>\r\n");


});

WriteLiteral("\r\n");


        }
    }
}
#pragma warning restore 1591
